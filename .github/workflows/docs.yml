      - name: Parse HyprJSON Docs
        shell: python
        run: |
          import re
          import os

          docs = {}
          # Regex matches: /** @docs Category \n content **/
          pattern = re.compile(r"/\*\*@docs\s+([\w\d]+)\n(.*?)\*\*/", re.DOTALL)

          # os.walk travels through 'core' and any other folders
          for root, dirs, files in os.walk('.'):
              for file in files:
                  if file.endswith('.js'):
                      with open(os.path.join(root, file), 'r') as f:
                          content = f.read()
                          matches = pattern.findall(content)
                          for category, text in matches:
                              if category not in docs:
                                  docs[category] = []
                              # Cleans the text and removes the '*' from the start of lines
                              clean_lines = []
                              for line in text.split('\n'):
                                  l = line.strip().lstrip('*').strip()
                                  if l: clean_lines.append(l)
                              docs[category].append("\n".join(clean_lines))

          with open('DOCS.md', 'w') as f:
              f.write("# HyprJSON API\n\n")
              if not docs:
                  f.write("_No docs found yet. Check your comment syntax!_")
              for cat in sorted(docs.keys()):
                  f.write(f"## {cat}\n")
                  for entry in docs[cat]:
                      f.write(f"{entry}\n\n")
                  f.write("---\n")
